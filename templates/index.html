<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Analizzatore Email</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            indigo: {
              50: '#eef2ff',
              100: '#e0e7ff',
              200: '#c7d2fe',
              300: '#a5b4fc',
              400: '#818cf8',
              500: '#6366f1',
              600: '#4f46e5',
              700: '#4338ca',
              800: '#3730a3',
              900: '#312e81',
            }
          }
        }
      }
    }
  </script>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 p-4 md:p-8">
  <div class="mx-auto max-w-6xl">
    <!-- Intestazione -->
    <header class="mb-8 text-center">
      <h1 class="text-3xl font-bold text-indigo-900 md:text-4xl">Analizzatore Email</h1>
      <p class="mt-2 text-indigo-700">Componi, analizza e traccia le tue email</p>
    </header>

    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
      <!-- Sezione Composizione Email -->
      <div class="shadow-lg bg-white rounded-lg">
        <div class="border-b p-4">
          <h2 class="flex items-center gap-2 text-xl font-semibold text-indigo-800">
            <i class="fas fa-envelope text-indigo-600"></i> Componi Email
          </h2>
          <p class="text-gray-600 text-sm">Scrivi la tua email e ottieni un'analisi istantanea</p>
        </div>
        <div class="p-6">
          <form id="emailForm" class="space-y-4">
            <div>
              <label class="mb-1 block text-sm font-medium text-gray-700">Mittente</label>
              <div class="relative">
                <i class="fas fa-user absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                <input
                  type="email"
                  id="mittente"
                  placeholder="mittente@example.com"
                  class="w-full border rounded-lg p-2 pl-10"
                  required
                />
              </div>
            </div>

            <div>
              <label class="mb-1 block text-sm font-medium text-gray-700">Destinatario</label>
              <div class="relative">
                <i class="fas fa-user absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                <input
                  type="email"
                  id="destinatario"
                  placeholder="destinatario@example.com"
                  class="w-full border rounded-lg p-2 pl-10"
                  required
                />
              </div>
            </div>

            <div>
              <div class="mb-1 flex items-center justify-between">
                <label class="block text-sm font-medium text-gray-700">Messaggio</label>
                <span class="text-sm text-gray-500">
                  <span id="charCount">0</span>/1000
                </span>
              </div>
              <textarea
                id="messaggio"
                placeholder="Scrivi qui il tuo messaggio email..."
                rows="6"
                maxlength="1000"
                class="w-full border rounded-lg p-2"
              ></textarea>
            </div>

            <div class="flex gap-3">
              <button
                type="submit"
                id="inviaBtn"
                class="flex-1 bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition disabled:opacity-50"
              >
                Invia e Analizza
              </button>
              <button
                type="button"
                id="resetBtn"
                class="flex-1 border border-indigo-500 text-indigo-600 py-2 rounded-lg hover:bg-indigo-50 transition"
              >
                Reset
              </button>
            </div>
          </form>

          <!-- Risultati dell'analisi -->
          <div id="risultatiAnalisi" class="mt-6 border border-indigo-200 bg-indigo-50 rounded-lg p-4 hidden">
            <h3 class="text-lg text-indigo-800 font-semibold mb-2">Risultati dell'Analisi</h3>
            <div class="space-y-3">
              <div>
                <h4 class="text-sm font-medium text-gray-700">Categoria</h4>
                <span id="categoria" class="inline-block px-2 py-1 bg-blue-500 text-white rounded text-xs"></span>
              </div>
              <div>
                <h4 class="text-sm font-medium text-gray-700">Parole Chiave</h4>
                <div id="paroleChiave" class="flex flex-wrap gap-2 mt-1"></div>
              </div>
              <div>
                <h4 class="text-sm font-medium text-gray-700">Riassunto</h4>
                <p id="riassunto" class="text-sm text-gray-700"></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sezione Cronologia Email -->
      <div class="shadow-lg bg-white rounded-lg">
        <div class="border-b p-4">
          <h2 class="flex items-center justify-between text-xl font-semibold text-indigo-800">
            <span class="flex items-center gap-2">
              <i class="fas fa-calendar text-indigo-600"></i> Cronologia Email
            </span>
            <span id="conteggioEmail" class="bg-indigo-100 text-indigo-700 px-2 py-1 rounded text-sm">0 email</span>
          </h2>
          <p class="text-gray-600 text-sm">Le tue email analizzate</p>
        </div>
        <div class="p-6">
          <!-- Barra di ricerca -->
          <div class="mb-4 relative">
            <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <input
              type="text"
              id="ricerca"
              placeholder="Inserisci parola chiave, mittente o destinatario..."
              class="w-full border rounded-lg p-2 pl-10"
            />
            <button
              id="pulisciRicerca"
              class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 hidden"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>

          <!-- Pulsanti categoria -->
          <div class="flex flex-wrap gap-2 mb-4">
            <button
              class="px-3 py-1 bg-indigo-600 text-white rounded text-sm categoria-btn active"
              data-categoria="tutte"
            >
              Tutte
            </button>
            <button
              class="px-3 py-1 border rounded text-sm categoria-btn"
              data-categoria="Lavoro"
            >
              Lavoro
            </button>
            <button
              class="px-3 py-1 border rounded text-sm categoria-btn"
              data-categoria="Personale"
            >
              Personale
            </button>
            <button
              class="px-3 py-1 border rounded text-sm categoria-btn"
              data-categoria="Promozionale"
            >
              Promozionale
            </button>
            <button
              class="px-3 py-1 border rounded text-sm categoria-btn"
              data-categoria="Importante"
            >
              Importante
            </button>
            <button
              class="px-3 py-1 border rounded text-sm categoria-btn"
              data-categoria="Newsletter"
            >
              Newsletter
            </button>
            <button
              class="px-3 py-1 border rounded text-sm categoria-btn"
              data-categoria="Altro"
            >
              Altro
            </button>
          </div>

          <!-- Lista email -->
          <div id="listaEmail" class="space-y-3">
            <div id="nessunaEmail" class="py-8 text-center border rounded-lg bg-gray-50">
              <p class="text-sm text-gray-500">La tua cronologia email Ã¨ vuota</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modale Dettaglio Email -->
  <div id="modaleEmail" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
    <div class="fixed inset-0 bg-black/50"></div>
    <div class="relative max-h-[90vh] w-full max-w-2xl overflow-y-auto rounded-lg bg-white shadow-xl">
      <div class="sticky top-0 flex items-center justify-between border-b bg-white p-4">
        <h2 class="flex items-center gap-2 text-lg font-semibold">
          <i class="fas fa-envelope text-indigo-600"></i> Dettagli Email
        </h2>
        <button id="chiudiModale" class="rounded-full p-1 hover:bg-gray-100">
          <i class="fas fa-times"></i>
        </button>
      </div>
     
      <div class="p-6">
        <div class="space-y-4">
          <div>
            <h3 class="text-sm font-medium text-gray-700">Mittente</h3>
            <p id="dettaglioMittente" class="mt-1 text-gray-900"></p>
          </div>
         
          <div>
            <h3 class="text-sm font-medium text-gray-700">Destinatario</h3>
            <p id="dettaglioDestinatario" class="mt-1 text-gray-900"></p>
          </div>
         
          <div>
            <h3 class="text-sm font-medium text-gray-700">Categoria</h3>
            <span id="dettaglioCategoria" class="inline-block px-2 py-1 rounded text-xs mt-1"></span>
          </div>
         
          <div>
            <h3 class="text-sm font-medium text-gray-700">Parole Chiave</h3>
            <div id="dettaglioParoleChiave" class="mt-1 flex flex-wrap gap-2"></div>
          </div>
         
          <div>
            <h3 class="text-sm font-medium text-gray-700">Riassunto</h3>
            <p id="dettaglioRiassunto" class="mt-1 text-gray-900"></p>
          </div>
         
          <div>
            <h3 class="text-sm font-medium text-gray-700">Messaggio</h3>
            <div class="mt-1 rounded-md bg-gray-50 p-4">
              <p id="dettaglioMessaggio" class="whitespace-pre-wrap text-gray-800"></p>
            </div>
          </div>
         
          <div class="flex items-center justify-between border-t pt-4">
            <span id="dettaglioTimestamp" class="text-sm text-gray-500"></span>
            <button id="chiudiModale2" class="border border-indigo-500 text-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-50 transition">
              Chiudi
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="/static/js/main.js"></script>
</body>
</html>
